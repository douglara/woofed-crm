<div data-events-form-target="kindChatwootConnect" hidden class="h-full w-full">
    <%= form_with(model: event, url: account_contact_events_path(current_user.account, contact_id: deal.contact.id, deal_id: deal.id), namespace: 'chatwoot_connect') do |form| %>
      <% if event.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(event.errors.count, "error") %> prohibited this activity kind from being saved:</h2>
  
          <ul>
            <% event.errors.each do |error| %>
              <li><%= error.full_message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <%= form.hidden_field :app_type, value: 'Apps::Chatwoot' %>
      <%= form.hidden_field :kind, value: 'chatwoot_message' %>
      <%= form.hidden_field :app_id, value: current_user.account.apps_chatwoots.last.id %>

      <div class="p-3 mt-4 flex">
        <div class="w-full">
          <%= form.fields_for :additional_attributes do | att | %>
            <%= att.label :chatwoot_inbox_id, 'Caixa de entrada', class:'py-1 typography-text-m-lh150 text-dark-gray-palette-p1' %>
            <%= att.select(:chatwoot_inbox_id, current_user.account.apps_chatwoots.last.inboxes.map { | inbox | [ inbox['name'], inbox['id']]  } , {}, {class: 'form-input w-full'} ) %>
          <% end %>
        </div>
      </div>
      <div class="border-t border-light-palette-p3 p-3 mt-4">
        <%= form.label :content, 'ConteÃºdo da mensagem', class:'py-2 typography-text-m-lh150 text-dark-gray-palette-p1' %>
        <%= form.text_area :content, class: 'form-input w-full' %>
      </div>
      <footer class="flex flex-row-reverse border-t border-light-palette-p3 p-3 mt-4 gap-2">
        <%= form.submit 'Confirmar', class: 'btn-primary cursor-pointer' %>
  
        <input type="button" value="Cancelar" data-action="click->events-form#selectNone" class="btn-secondary cursor-pointer">
      </footer>
    <% end %>
  </div>
  
  
  