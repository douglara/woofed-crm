<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" name="viewport">
    <title>Woofed CRM</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= action_cable_meta_tag %>
    <%= stylesheet_link_tag 'application' %>
    <link rel="stylesheet" href="/assets/stisla/node_modules/@fortawesome/fontawesome-free/css/all">
    <link rel="stylesheet" href="/assets/stisla/node_modules/izitoast/dist/css/iziToast.min.css">
    <link rel="stylesheet" href="/assets/stisla/node_modules/summernote/dist/summernote-bs4.css">
    <link rel="stylesheet" href="/assets/stisla/node_modules/select2/dist/css/select2.min.css">
    <link rel="stylesheet" href="/assets/stisla/assets/css/components.css">
    <link rel="stylesheet" href="/assets/stisla/node_modules/bootstrap-daterangepicker/daterangepicker.css">

    <%= stylesheet_link_tag "#{controller_name}", media: 'all' rescue nil %>
    <%= javascript_pack_tag 'application', defer: true, 'data-turbo-track': 'reload' %>

    <%= yield :stylesheets %>
  </head>

  <body>
  	<div id="app">
      <div class="main-wrapper">
      
      <%= render "layouts/shared/nav" %>

      <!-- Main Content -->
      <div class="main-content">
        <%= content_for?(:content) ? yield(:content) : yield %>
      </div>

      <footer class="main-footer">
        <div class="footer-left">
        </div>
        <div class="footer-right">
        </div>
      </footer>
    </div>
    <script src="/assets/stisla/node_modules/jquery/dist/jquery.min.js" type="text/javascript"></script>
    <script src="/assets/stisla/node_modules/izitoast/dist/js/iziToast.min.js" type="text/javascript"></script>
    <script src="/assets/stisla/node_modules/select2/dist/js/select2.full.min.js" type="text/javascript"></script>
    <script src="/assets/stisla/node_modules/moment/min/moment.min.js" type="text/javascript"></script>
    <script src="/assets/stisla/node_modules/bootstrap-daterangepicker/daterangepicker.js" type="text/javascript"></script>

    <%= yield :javascripts %>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        <% flash.each do |key, value| %>
          <% unless value.blank? %>

            switch ('<%= key %>') {
              case 'notice':
                iziToast.success({
                  title: 'Success!',
                  message: '<%= value %>',
                  position: 'topRight'
                })
                break
              case 'error':
              case 'alert':
                iziToast.error({
                  title: 'Error',
                  message: '<%= value %>',
                  position: 'topRight'
                })
                break
            }
          <% end %>
        <% end %>
      })
    </script>
  </body>
</html>